# BOFAMET – Инфраструктура Сбора Данных и Управления

BOFAMET представляет собой комплексное решение для сбора данных с целевых систем, состоящее из модуля-коллектора (стиллера) и централизованной панели управления (C2-сервера). Коллектор, написанный на Python, компилируется в автономный исполняемый файл Windows, а собранные данные передаются на C2-сервер, разработанный на базе FastAPI.

## I. Модуль Коллектора Данных (Стиллер)

Модуль коллектора предназначен для всестороннего сбора информации с компрометированной системы.

### Ключевые Возможности:

*   **Извлечение Данных Браузеров:**
    *   Получение сохраненных учетных данных для входа (логины, пароли) из широкого спектра веб-браузеров (Chrome, Edge, Opera, Yandex, Brave, Vivaldi, Slimjet, Falkon, SeaMonkey, Maxthon, Pale Moon, Qutebrowser, Iridium, CentBrowser, Tor).
    *   Сбор файлов cookie браузеров для потенциального обхода аутентификации.
    *   Извлечение истории посещений и данных автозаполнения форм из поддерживаемых браузеров.
*   **Сбор Системной Информации:** Детальный сбор сведений о хост-системе, включая:
    *   Операционная система (тип, версия).
    *   Аппаратное обеспечение (процессор, количество ядер, объем оперативной памяти, информация о дисковом пространстве).
    *   Конфигурация сети (локальный IP-адрес, MAC-адрес, данные Wi-Fi SSID и BSSID).
    *   Информация о пользователе (имя пользователя, имя компьютера).
    *   Определение публичного IP-адреса и геолокационных данных (город, регион, страна, широта, долгота).
*   **Снимок Экрана Рабочего Стола:** Создание скриншота текущего рабочего стола целевой системы.
*   **Извлечение Сессии Telegram:** Попытка получения файлов локальной сессии Telegram (путем временного завершения процесса Telegram для обеспечения доступа к файлам сессии).
*   **Обнаружение Токенов Discord:** Сканирование системы на наличие токенов аутентификации Discord в различных расположениях.
*   **Конфигурация Steam:** Копирование конфигурационных файлов клиента Steam.
*   **Целевая Эксфильтрация Файлов:** Поиск и копирование файлов с определенными расширениями (.doc, .docx, .xls, .xlsx, .ppt, .pptx, .pdf, .bmp) из пользовательских директорий.
*   **Извлечение Криптокошельков:** Выявление и копирование файлов, ассоциированных с криптографическими кошельками (например, `wallet.dat`, `key.json`, `keystore`, `mnemonic.txt`, `seed.txt`, а также SSH-ключи, такие как `id_rsa`).
*   **Передача Данных:** Архивирование всех собранных данных в ZIP-архивы (с возможностью разделения на части при превышении заданного размера) и последующая их отправка на настроенный C2-сервер вместе с системной информацией и геолокационными данными.

## II. Модуль Билдера Коллектора

Билдер предназначен для создания настраиваемого исполняемого файла коллектора.

### Ключевые Возможности:

*   **Конфигурация C2-Сервера:** Интерактивное задание IP-адреса и порта центрального сервера управления, на который будут отправляться собранные данные.
*   **Компиляция в EXE:** Использование PyInstaller для создания единого, автономного исполняемого файла Windows (.exe) без консольного окна.
*   **Настройка Иконки:** Возможность добавления пользовательского файла иконки (.ico) к генерируемому исполняемому файлу.
*   **Многоуровневая Обфускация:** Применение нескольких слоев обфускации к исходному коду коллектора перед компиляцией для усложнения анализа:
    *   Кодирование Base16.
    *   Компиляция в байт-код Python и сериализация с использованием модуля `marshal`.
    *   Сжатие сериализованных данных с помощью библиотеки `zlib`.
    *   Кодирование сжатых данных с использованием Base32.
    *   Дополнительный слой обфускации с использованием `openobf.dll` для повышения устойчивости к реверс-инжинирингу.
*   **Логирование Процесса Сборки:** Все этапы процесса сборки, включая вывод PyInstaller, фиксируются в файле `builder_log.txt` для отладки и аудита.

## III. Центральный Сервер Управления (C2-Сервер)

C2-сервер представляет собой веб-панель на базе FastAPI для приема, хранения и управления собранными данными.

### Ключевые Возможности:

*   **Веб-Интерфейс:** Интуитивно понятный веб-интерфейс для просмотра и управления полученными логами.
*   **Защита Доступа:**
    *   **Аутентификация:** Защищенный вход в административную панель с использованием настраиваемых учетных данных.
    *   **Привязка Сессии к IP-адресу:** Сессия пользователя привязывается к его IP-адресу, обеспечивая выход из системы при обнаружении смены IP-адреса.
    *   **Защита от Bruteforce (Локальная):** Блокировка IP-адреса на 5 минут после 5 некорректных попыток входа с одного и того же IP-адреса.
    *   **Защита от Bruteforce (Глобальная):** В случае 100 глобальных неудачных попыток входа (с разных IP-адресов) панель управления будет перманентно заблокирована до перезапуска сервера.
    *   **Отключение Документации API:** Доступ к стандартной документации FastAPI (Swagger UI, ReDoc) полностью отключен для повышения безопасности и предотвращения несанкционированного изучения структуры API.
*   **Управление Логами:**
    *   **Просмотр Логируемых Событий:** Отображение списка всех полученных логов, включая временные метки, IP-адреса, имена компьютеров и другую метаинформацию.
    *   **Загрузка Отдельных Лог-Файлов:** Возможность загрузки каждого отдельного ZIP-архива с данными.
    *   **Массовая Загрузка Лог-Файлов:** Функция для скачивания всех собранных логов в едином ZIP-архиве.
    *   **Удаление Дубликатов:** При получении нового лога от уже известной пары "имя компьютера - публичный IP-адрес", предыдущая запись и связанные с ней файлы автоматически удаляются, заменяясь новой записью.
*   **Обработка Загружаемых Файлов:**
    *   **Фильтрация по Типу:** Эндпоинт загрузки данных (`/upload`) принимает только ZIP-арархивы, отклоняя любые другие типы файлов.
    *   **Организация Хранения:** Каждый загруженный лог сохраняется в отдельную директорию на сервере.
*   **Просмотр Лог-Файла Сервера:** Доступ к содержимому файла `nohup.out` (серверный лог) через веб-интерфейс для мониторинга работы сервера.
*   **Защита Отладочной Консоли (Клиентская):** Внедрение JavaScript-кода на клиентской стороне для затруднения использования отладочной консоли браузера, включая отключение контекстного меню, обнаружение нажатий F12 и Ctrl+Shift+I/J, а также бесконечный цикл `debugger;` и блокировку вывода в консоль.

## IV. Инструкции по Установке и Эксплуатации

### 1. Установка и Конфигурация C2-Сервера:

Сервер может быть установлен на системах под управлением Linux или Windows.

**Предварительные Требования:**
*   Желательная операционная система: Ubuntu 20.04.
*   Установленный Python 3.x (рекомендуется Python 3.8 или новее).
*   Утилита `pip` для установки пакетов Python.

**Порядок Установки (Linux, рекомендуется):**
1.  **Обновление Системы и Установка Python:** Выполните скрипт `Start.sh` из директории сервера. Он автоматически обновит систему, установит Python3 и pip3.
    ```bash
    chmod +x Start.sh
    sudo ./Start.sh
    ```
2.  **Настройка Сервера:** Скрипт `Start.sh` запустит `Config_C2.py`. Следуйте инструкциям командной строки:
    *   Вам будет предложено ввести желаемое имя пользователя и пароль для доступа к административной панели C2.
    *   Необходимо будет указать порт, на котором будет прослушиваться сервер (например, `8000`).
    *   Скрипт сгенерирует секретный ключ для сессий и сохранит все настройки в файл `config.json`.
    *   После настройки `Config_C2.py` предложит варианты запуска сервера (в отладочном режиме на переднем плане или в фоновом режиме с `nohup`). Для продакшн-использования рекомендуется фоновый режим.

**Порядок Установки (Windows):**
1.  **Установка Зависимостей:** Убедитесь, что у вас установлен Python 3.x и `pip`. Перейдите в корневую директорию сервера (где находится `requirements.txt`) и установите необходимые библиотеки:
    ```bash
    pip install -r requirements.txt
    ```
2.  **Настройка Сервера:** Запустите скрипт `Config_C2.py`:
    ```bash
    python Config_C2.py
    ```
    *   Следуйте тем же инструкциям, что и для Linux, по вводу имени пользователя, пароля и порта. `config.json` будет создан автоматически.
3.  **Запуск Сервера:** После завершения `Config_C2.py`, вам будет предложено запустить сервер. Выберите желаемый режим запуска.

**Доступ к Панели Управления:**
После успешного запуска сервера, доступ к административной панели осуществляется через веб-браузер по адресу `http://<IP_ВАШЕГО_СЕРВЕРА>:<ПОРТ>/login`.

### 2. Создание Модуля Коллектора (Стиллер) с Помощью Билдера:

**Предварительные Требования:**
*   Установленный Python 3.x (рекомендуется Python 3.8+).
*   Установленные пакеты Python. Перейдите в директорию билдера и выполните:
    ```bash
    pip install PyInstaller colorama Pillow pycryptodome pypiwin32 psutil requests aiofiles pystyle pywin32
    ```
    *(Примечание: `pypiwin32` может быть заменен на `pywin32` в зависимости от версии Python и OS).*

**Порядок Создания:**
1.  **Запуск Билдера:** Запустите скрипт `BOFAMET2.py`:
    BOFAMET_C2_builder.exe
    Либо в случае использования исходного кода:
    ```bash
    python BOFAMET2.py
    ```
    *   При необходимости скрипт запросит права администратора для работы с временными файлами и PyInstaller.
2.  **Конфигурация Сборки:** Следуйте интерактивным инструкциям:
    *   Введите IP-адрес вашего развернутого C2-сервера (тот же, что вы использовали при настройке сервера).
    *   Введите порт вашего C2-сервера.
    *   При желании укажите полный путь к файлу `.ico` для использования в качестве иконки для генерируемого исполняемого файла.
3.  **Процесс Сборки:** Билдер автоматически обфусцирует исходный код коллектора и скомпилирует его в исполняемый файл с использованием PyInstaller.
4.  **Результат:** Готовый исполняемый файл под названием `BOFAMET_BUILD.exe` будет расположен в директории `dist` относительно места запуска билдера.

## V. Принцип Обфускации Коллектора:

Билдер применяет многоэтапный подход к обфускации исходного кода коллектора для обеспечения его защиты:
1.  Исходный код сначала подвергается кодированию с использованием Base16.
2.  Полученный результат компилируется в байт-код Python и сериализуется с помощью модуля `marshal`.
3.  Сериализованные данные затем сжимаются с использованием библиотеки `zlib`.
4.  Сжатые данные кодируются с помощью Base32.
5.  В качестве завершающего этапа применяется дополнительный слой кастомной обфускации, реализуемой через динамическую библиотеку `openobf.dll`.
Во время исполнения коллектора небольшой загрузчик последовательно декодирует и декомпрессирует эти слои, чтобы выполнить оригинальный код.

---
**Дисклеймер:** Данное программное обеспечение предоставляется исключительно в образовательных и исследовательских целях. Разработчики не несут ответственности за любое неправомерное использование этого инструмента. 
